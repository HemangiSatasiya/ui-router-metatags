{"version":3,"sources":["ui-router-metatags.ts","ui-router-metatags.js"],"names":[],"mappings":"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","file":"ui-router-metatags.js","sourcesContent":["/**\r\n * Metatags for angular-ui-router\r\n */\r\nnamespace uiroutermetatags {\r\n\tconst appModule = angular.module('ui.router.metatags', ['ui.router']);\r\n\r\n\texport interface IMetaTags {\r\n\t\ttitle?: string | Function;\r\n\t\tdescription?: string | Function;\r\n\t\tkeywords?: string | Function;\r\n\t\trobots?: string | Function;\r\n\t\tproperties?: {\r\n\t\t\t[index: string]: string | Function;\r\n\t\t},\r\n\t\tprerender?: Prerender;\r\n\t}\r\n\r\n\texport interface Prerender {\r\n\t\tstatusCode?: number | Function,\r\n\t\theader?: string | Function\r\n\t}\r\n\r\n\texport interface IProvider {\r\n\t\tsetTitlePrefix(prefix: string): IProvider;\r\n\t\tsetTitleSuffix(suffix: string): IProvider;\r\n\t\tsetDefaultTitle(title: string): IProvider;\r\n\t\tsetDefaultDescription(description: string): IProvider;\r\n\t\tsetDefaultKeywords(keywords: string): IProvider;\r\n\t\tsetDefaultRobots(robots: string): IProvider;\r\n\t\tsetStaticProperties(properties: {}): IProvider;\r\n\t\tsetOGURL(enabled: boolean): IProvider;\r\n\t}\r\n\r\n\texport interface IService {\r\n\t\tupdate(tags: IMetaTags, transition: any): void;\r\n\t\tprerender: uiroutermetatags.Prerender;\r\n\t}\r\n\r\n\texport interface IConfig {\r\n\t\tprefix: string;\r\n\t\tsuffix: string;\r\n\t\tdefaultTitle: string;\r\n\t\tdefaultDescription: string;\r\n\t\tdefaultKeywords: string;\r\n\t\tdefaultRobots: string;\r\n\t\tstaticProperties: {};\r\n\t\tenableOGURL: boolean;\r\n\t}\r\n\r\n\tclass UIRouterMetatags implements angular.IServiceProvider, uiroutermetatags.IProvider {\r\n\t\tprefix: string = '';\r\n\t\tsuffix: string = '';\r\n\t\tdefaultTitle: string = '';\r\n\t\tdefaultDescription: string = '';\r\n\t\tdefaultKeywords: string = '';\r\n\t\tdefaultRobots: string = '';\r\n\t\tstaticProperties: {} = {};\r\n\t\tenableOGURL: boolean = false;\r\n\r\n\t\t/* @ngInject */\r\n\t\tconstructor() {\r\n\r\n\t\t}\r\n\r\n\t\tsetTitlePrefix(prefix: string): UIRouterMetatags {\r\n\t\t\tthis.prefix = prefix;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tsetTitleSuffix(suffix: string): UIRouterMetatags {\r\n\t\t\tthis.suffix = suffix;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tsetDefaultTitle(title: string): UIRouterMetatags {\r\n\t\t\tthis.defaultTitle = title;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tsetDefaultDescription(description: string): UIRouterMetatags {\r\n\t\t\tthis.defaultDescription = description;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tsetDefaultKeywords(keywords: string): UIRouterMetatags {\r\n\t\t\tthis.defaultKeywords = keywords;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tsetDefaultRobots(robots: string): UIRouterMetatags {\r\n\t\t\tthis.defaultRobots = robots;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tsetStaticProperties(properties: {}): UIRouterMetatags {\r\n\t\t\tthis.staticProperties = properties;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tsetOGURL(enabled: boolean): UIRouterMetatags {\r\n\t\t\tthis.enableOGURL = enabled;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic $get(): uiroutermetatags.IConfig {\r\n\t\t\treturn {\r\n\t\t\t\tprefix: this.prefix,\r\n\t\t\t\tsuffix: this.suffix,\r\n\t\t\t\tdefaultTitle: this.defaultTitle,\r\n\t\t\t\tdefaultDescription: this.defaultDescription,\r\n\t\t\t\tdefaultKeywords: this.defaultKeywords,\r\n\t\t\t\tdefaultRobots: this.defaultRobots,\r\n\t\t\t\tstaticProperties: this.staticProperties,\r\n\t\t\t\tenableOGURL: this.enableOGURL\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tappModule.provider('UIRouterMetatags', UIRouterMetatags);\r\n\r\n\tclass MetaTags {\r\n\t\ttitle: string;\r\n\t\tkeywords: string;\r\n\t\tdescription: string;\r\n\t\trobots: string;\r\n\t\tproperties: {};\r\n\t\tprerender: uiroutermetatags.Prerender = {};\r\n\t\t\r\n\t\t/* @ngInject */\r\n\t\tconstructor(public $log: angular.ILogService, public UIRouterMetatags: uiroutermetatags.IConfig, \r\n\t\t\tpublic $interpolate: angular.IInterpolateService, public $injector: angular.auto.IInjectorService, \r\n\t\t\tpublic $state: any, public $location: angular.ILocationService, public $window,\r\n\t\t\tpublic $uiRouterGlobals: any\r\n\t\t) {\r\n\t\t}\r\n\r\n\t\tupdate(tags: uiroutermetatags.IMetaTags, transition: any) {\r\n\t\t\ttry {\r\n\r\n\t\t\t\t/* \r\n\t\t\t\t\tThis hack is used to resolve the lack of \"this.$state.$current.locals.globals\".\r\n\t\t\t\t\tHere the resolved object is builded with all previews resolved data\r\n\t\t\t\t*/\r\n\t\t\t\tvar resolved = {}\r\n\t\t\t\tlet tokens = transition.getResolveTokens();\r\n\t\t\t\ttokens.forEach(token => resolved[token] = transition.injector().get(token));\r\n\r\n\t\t\t\tthis.properties = angular.extend({}, this.UIRouterMetatags.staticProperties);\r\n\r\n\t\t\t\tif (this.UIRouterMetatags.enableOGURL) {\r\n\t\t\t\t\tthis.properties['og:url'] = this.$location.absUrl();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (tags) {\r\n\t\t\t\t\tthis.title = tags.title ? this.UIRouterMetatags.prefix + (this.getValue('title', tags.title, resolved) || '') + this.UIRouterMetatags.suffix : this.UIRouterMetatags.defaultTitle;\r\n\t\t\t\t\tthis.description = tags.description ? this.getValue('description', tags.description, resolved) : this.UIRouterMetatags.defaultDescription;\r\n\t\t\t\t\tthis.keywords = tags.keywords ? this.getValue('keywords', tags.keywords, resolved) : this.UIRouterMetatags.defaultKeywords;\r\n\t\t\t\t\tthis.robots = tags.robots ? this.getValue('robots', tags.robots, resolved) : this.UIRouterMetatags.defaultRobots;\r\n\t\t\t\t\tangular.forEach(tags.properties, (value, key) => {\r\n\t\t\t\t\t\tvar v = this.getValue(key, value, resolved);\r\n\t\t\t\t\t\tif (v) {\r\n\t\t\t\t\t\t\tthis.properties[key] = v;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.title = this.UIRouterMetatags.defaultTitle;\r\n\t\t\t\t\tthis.description = this.UIRouterMetatags.defaultDescription;\r\n\t\t\t\t\tthis.keywords = this.UIRouterMetatags.defaultKeywords;\r\n\t\t\t\t\tthis.robots = this.UIRouterMetatags.defaultRobots;\r\n\t\t\t\t}\r\n\t\t\t\tif (tags && tags.prerender) {\r\n\t\t\t\t\tthis.prerender.statusCode = tags.prerender.statusCode ? this.getValue('prerender.statusCode', tags.prerender.statusCode, resolved) : 200;\r\n\t\t\t\t\tthis.prerender.header = tags.prerender.header ? this.getValue('rerender.header', tags.prerender.header, resolved) : null;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.prerender.statusCode = 200;\r\n\t\t\t\t\tthis.prerender.header = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.$window.prerenderReady = true;\r\n\t\t\t} catch (err) {\r\n\t\t\t\tthis.$log.error('error occured when extracting metatags:', err);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tgetValue(tagType: string, tag, resolved: any) {\r\n\t\t\ttry {\r\n\t\t\t\tif (!tag) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t} else if (typeof tag === 'number') {\r\n\t\t\t\t\treturn tag;\r\n\t\t\t\t} else if (typeof tag === 'string' && tag.trim().length === 0) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t} else if (angular.isFunction(tag) || Array.isArray(tag)) {\r\n\t\t\t\t\treturn this.$injector.invoke(tag, this, resolved);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn this.$interpolate(tag)(resolved);\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\tthis.$log.error('error occured when trying to get the value of tag:', tagType, err);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tappModule.service('MetaTags', MetaTags);\r\n\r\n\t/* @ngInject */\r\n\tfunction runBlockTransitions($log: angular.ILogService, MetaTags: uiroutermetatags.IService, $window: angular.IWindowService, $transitions: any) {\r\n\r\n\t\t$transitions.onStart({}, onStart)\r\n\t\t$transitions.onSuccess({}, onSuccess)\r\n\t\t$transitions.onError({}, onError)\r\n\r\n\r\n\t\tfunction onStart(transition: any) {\r\n\t\t\t$window.prerenderReady = false;\r\n\t\t}\r\n\r\n\t\tfunction onSuccess(transition: any) {\r\n\t\t\tvar toState = transition.$to()\r\n\t\t\tvar fromState = transition.$from()\r\n\t\t\t\r\n\t\t\tif (!toState.metaTags) {\r\n\t\t\t\t$log.debug(`MetaTags - route: \"${toState.name}\" does not contain any metatags`);\r\n\t\t\t}\r\n\r\n\t\t\tMetaTags.update(toState.metaTags as uiroutermetatags.IMetaTags, transition);\r\n\t\t}\r\n\r\n\t\tfunction onError(transition: any) {\r\n\t\t\tMetaTags.prerender.statusCode = 500;\r\n\t\t\t$window.prerenderReady = true;\r\n\t\t}\r\n\t}\r\n\t\r\n\tappModule.run(runBlockTransitions);\r\n}\r\n\r\ndeclare module angular.ui {\r\n    interface IState {\r\n\t\tmetaTags?: uiroutermetatags.IMetaTags;\r\n\t}\r\n}\r\n\r\ninterface Window {\r\n\tprerenderReady?: boolean;\r\n}\r\n","/**\n * Metatags for angular-ui-router\n */\nvar uiroutermetatags;\n(function (uiroutermetatags) {\n    var appModule = angular.module('ui.router.metatags', ['ui.router']);\n    var UIRouterMetatags = /** @class */ (function () {\n        /* @ngInject */\n        function UIRouterMetatags() {\n            this.prefix = '';\n            this.suffix = '';\n            this.defaultTitle = '';\n            this.defaultDescription = '';\n            this.defaultKeywords = '';\n            this.defaultRobots = '';\n            this.staticProperties = {};\n            this.enableOGURL = false;\n        }\n        UIRouterMetatags.prototype.setTitlePrefix = function (prefix) {\n            this.prefix = prefix;\n            return this;\n        };\n        UIRouterMetatags.prototype.setTitleSuffix = function (suffix) {\n            this.suffix = suffix;\n            return this;\n        };\n        UIRouterMetatags.prototype.setDefaultTitle = function (title) {\n            this.defaultTitle = title;\n            return this;\n        };\n        UIRouterMetatags.prototype.setDefaultDescription = function (description) {\n            this.defaultDescription = description;\n            return this;\n        };\n        UIRouterMetatags.prototype.setDefaultKeywords = function (keywords) {\n            this.defaultKeywords = keywords;\n            return this;\n        };\n        UIRouterMetatags.prototype.setDefaultRobots = function (robots) {\n            this.defaultRobots = robots;\n            return this;\n        };\n        UIRouterMetatags.prototype.setStaticProperties = function (properties) {\n            this.staticProperties = properties;\n            return this;\n        };\n        UIRouterMetatags.prototype.setOGURL = function (enabled) {\n            this.enableOGURL = enabled;\n            return this;\n        };\n        UIRouterMetatags.prototype.$get = function () {\n            return {\n                prefix: this.prefix,\n                suffix: this.suffix,\n                defaultTitle: this.defaultTitle,\n                defaultDescription: this.defaultDescription,\n                defaultKeywords: this.defaultKeywords,\n                defaultRobots: this.defaultRobots,\n                staticProperties: this.staticProperties,\n                enableOGURL: this.enableOGURL\n            };\n        };\n        return UIRouterMetatags;\n    }());\n    appModule.provider('UIRouterMetatags', UIRouterMetatags);\n    var MetaTags = /** @class */ (function () {\n        /* @ngInject */\n        function MetaTags($log, UIRouterMetatags, $interpolate, $injector, $state, $location, $window, $uiRouterGlobals) {\n            this.$log = $log;\n            this.UIRouterMetatags = UIRouterMetatags;\n            this.$interpolate = $interpolate;\n            this.$injector = $injector;\n            this.$state = $state;\n            this.$location = $location;\n            this.$window = $window;\n            this.$uiRouterGlobals = $uiRouterGlobals;\n            this.prerender = {};\n        }\n        MetaTags.prototype.update = function (tags, transition) {\n            var _this = this;\n            try {\n                /*\n                    This hack is used to resolve the lack of \"this.$state.$current.locals.globals\".\n                    Here the resolved object is builded with all previews resolved data\n                */\n                var resolved = {};\n                var tokens = transition.getResolveTokens();\n                tokens.forEach(function (token) { return resolved[token] = transition.injector().get(token); });\n                this.properties = angular.extend({}, this.UIRouterMetatags.staticProperties);\n                if (this.UIRouterMetatags.enableOGURL) {\n                    this.properties['og:url'] = this.$location.absUrl();\n                }\n                if (tags) {\n                    this.title = tags.title ? this.UIRouterMetatags.prefix + (this.getValue('title', tags.title, resolved) || '') + this.UIRouterMetatags.suffix : this.UIRouterMetatags.defaultTitle;\n                    this.description = tags.description ? this.getValue('description', tags.description, resolved) : this.UIRouterMetatags.defaultDescription;\n                    this.keywords = tags.keywords ? this.getValue('keywords', tags.keywords, resolved) : this.UIRouterMetatags.defaultKeywords;\n                    this.robots = tags.robots ? this.getValue('robots', tags.robots, resolved) : this.UIRouterMetatags.defaultRobots;\n                    angular.forEach(tags.properties, function (value, key) {\n                        var v = _this.getValue(key, value, resolved);\n                        if (v) {\n                            _this.properties[key] = v;\n                        }\n                    });\n                }\n                else {\n                    this.title = this.UIRouterMetatags.defaultTitle;\n                    this.description = this.UIRouterMetatags.defaultDescription;\n                    this.keywords = this.UIRouterMetatags.defaultKeywords;\n                    this.robots = this.UIRouterMetatags.defaultRobots;\n                }\n                if (tags && tags.prerender) {\n                    this.prerender.statusCode = tags.prerender.statusCode ? this.getValue('prerender.statusCode', tags.prerender.statusCode, resolved) : 200;\n                    this.prerender.header = tags.prerender.header ? this.getValue('rerender.header', tags.prerender.header, resolved) : null;\n                }\n                else {\n                    this.prerender.statusCode = 200;\n                    this.prerender.header = null;\n                }\n                this.$window.prerenderReady = true;\n            }\n            catch (err) {\n                this.$log.error('error occured when extracting metatags:', err);\n            }\n        };\n        MetaTags.prototype.getValue = function (tagType, tag, resolved) {\n            try {\n                if (!tag) {\n                    return null;\n                }\n                else if (typeof tag === 'number') {\n                    return tag;\n                }\n                else if (typeof tag === 'string' && tag.trim().length === 0) {\n                    return null;\n                }\n                else if (angular.isFunction(tag) || Array.isArray(tag)) {\n                    return this.$injector.invoke(tag, this, resolved);\n                }\n                else {\n                    return this.$interpolate(tag)(resolved);\n                }\n            }\n            catch (err) {\n                this.$log.error('error occured when trying to get the value of tag:', tagType, err);\n                return null;\n            }\n        };\n        return MetaTags;\n    }());\n    appModule.service('MetaTags', MetaTags);\n    /* @ngInject */\n    function runBlockTransitions($log, MetaTags, $window, $transitions) {\n        $transitions.onStart({}, onStart);\n        $transitions.onSuccess({}, onSuccess);\n        $transitions.onError({}, onError);\n        function onStart(transition) {\n            $window.prerenderReady = false;\n        }\n        function onSuccess(transition) {\n            var toState = transition.$to();\n            var fromState = transition.$from();\n            if (!toState.metaTags) {\n                $log.debug(\"MetaTags - route: \\\"\" + toState.name + \"\\\" does not contain any metatags\");\n            }\n            MetaTags.update(toState.metaTags, transition);\n        }\n        function onError(transition) {\n            MetaTags.prerender.statusCode = 500;\n            $window.prerenderReady = true;\n        }\n    }\n    appModule.run(runBlockTransitions);\n})(uiroutermetatags || (uiroutermetatags = {}));\n"]}